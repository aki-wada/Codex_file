## 医療統計アシストアプリ 仕様案

- 対象/目的: 医療研究者・統計担当が臨床/疫学データで解析設計〜実行〜解釈を効率化・標準化。再現性とコンプライアンスを確保。
- 主機能:
  - 解析プロジェクト管理: プロトコル/解析計画/版管理、データ辞書、分析ログ自動保存。
  - データ取り込み/クリーニング: CSV/Excel/SQL接続、型推定とバリデーション、欠測/外れ値検出、変数リコード・派生変数作成。
  - 記述統計: 分布要約、クロス集計、群比較の自動テーブル生成 (Word/LaTeX/CSV)。
  - 推測統計/モデリング: t/χ²/非パラ検定、線形/ロジスティック/ポアソン/コックス回帰、混合効果、傾向スコア、サバイバル曲線、感度分析。
  - サンプルサイズ/パワー計算: 主要デザイン別ウィザードと可視化。
  - 可視化: 箱ひげ/ヒスト/QQ/フォレスト/ROC/カプランマイヤ、出版品質出力。
  - 再現性: 解析スクリプト自動生成 (R/Python選択)、環境ロック (renv/conda)、結果レポート自動生成 (PDF/HTML)。
  - ナレッジ支援: 用語/モデル選択ガイド、結果解釈テンプレ、CONSORT/STROBEチェックリスト支援。
  - 監査/権限: 役割別アクセス、操作ログ、署名付き解析実行、PIレビュー承認フロー。
- 非機能:
  - セキュリティ/コンプライアンス: PIIなし前提のワークスペース分離、暗号化保存/転送、RBAC、多要素、監査証跡、データ保持ポリシー設定。国内法/施設規程に合わせる。
  - 性能: 10–50万行×200列程度を数秒〜十数秒で主要集計。重い解析は非同期ジョブ。
  - 可観測性: 実行ログ、ジョブキュー監視、エラートレース。
- アーキテクチャ（案）:
  - フロント: React/Next + TypeScript、UIコンポーネント系 (既存規約に合わせる)。Plotly/echartsで対話可視化。
  - バックエンド: Python (FastAPI) または R plumber。タスクキュー (Celery/RQ) で非同期。R/Pythonカーネルをサンドボックス隔離。
  - データ/保存: Postgres (メタデータ)、オブジェクトストレージ (入力/出力/レポート)、ジョブ結果キャッシュ (Redis)。
  - 再現環境: Dockerイメージ固定 + renv/condaロック。
- データモデル（例）:
  - User(RBAC), Project, Dataset(バージョン/辞書), AnalysisPlan(前処理/モデル/パラメータ), Job(status/log/output refs), Report。
- ワークフロー:
  1) プロジェクト作成・権限設定 → 2) データ取込・辞書確認 → 3) 解析計画テンプレ作成 → 4) 前処理設定 → 5) 記述統計/可視化 → 6) 推測モデル実行 → 7) 感度分析・検証 → 8) レポート生成・承認。
- 拡張/後続:
  - CDISC/REDcap/OMOP インポート対応。
  - 施設テンプレのプラグイン化、解析モジュール追加。
  - 監査証跡のPDFエクスポート、電子署名連携。
